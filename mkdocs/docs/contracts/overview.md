# Smart Contracts

<a href="https://github.com/0xPolygonID/contracts" target="_blank">**Polygon ID Smart Contracts - Github**</a>

### CredentialAtomicQuerySigValidator

<a href="https://github.com/0xPolygonID/contracts/blob/main/contracts/validators/CredentialAtomicQuerySigValidator.sol" target="_blank">**CredentialAtomicQuerySigValidator.sol - Github**</a>

The CredentialAtomicQuerySigValidator contract is used to verify any credential-related zk proof generated by user using the <a href="https://docs.iden3.io/protocol/main-circuits/#credentialAtomicQuerySigV2OnChain" target="_blank">`credentialAtomicQuerySigV2OnChain`</a> circuit. The contract only verifies proofs based on credential of type `Signature`

The core of the contract is its <a href="https://github.com/0xPolygonID/contracts/blob/main/contracts/validators/CredentialAtomicQuerySigValidator.sol#L41" target="_blank">`verify`</a> function that takes the proof generated by a user and executes a set of verifications:

- Verifies that the proof is valid. This verification is actually performed inside the 
<a href="https://github.com/0xPolygonID/contracts/blob/main/contracts/verifiers/circuits/verifierSig.sol" target="_blank">`verifierSig`</a> contract which is automatically generated using circom.
- Verifies that the input used to generate the proof matches the query associated to that specific Request.
- Verifies that the user's and the Issuer's identity states are valid based on the State Contract.

> The CredentialAtomicQuerySigValidator executes the same set of verifications of the [Verification Library](../verifier/verification-library/verification-api-guide.md#verification---under-the-hood). The former is required when performing on-chain verification while the latter is required for off-chain verification.

CredentialAtomicQuerySigValidator address:

- <a href="https://mumbai.polygonscan.com/address/0xF2D4Eeb4d455fb673104902282Ce68B9ce4Ac450" target="_blank">Mumbai: 0xF2D4Eeb4d455fb673104902282Ce68B9ce4Ac450</a>

### CredentialAtomicQueryMTPValidator

<a href="https://github.com/0xPolygonID/contracts/blob/main/contracts/validators/CredentialAtomicQueryMTPValidator.sol" target="_blank">**CredentialAtomicQueryMTPValidator.sol - Github**</a>

Performs the same set of verifications of the CredentialAtomicQuerySigValidator but for credential of type `MTP`

CredentialAtomicQueryMTPValidator address:

- <a href="https://mumbai.polygonscan.com/address/0x3DcAe4c8d94359D31e4C89D7F2b944859408C618" target="_blank">Mumbai: 0x3DcAe4c8d94359D31e4C89D7F2b944859408C618</a>

> Further protocol related contracts can found at <a href="https://docs.iden3.io/contracts/state/" target="_blank">Iden3 - Smart Contracts</a>