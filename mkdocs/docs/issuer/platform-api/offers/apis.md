# Claim Offers

Once an Issuer has been set up and created schemas, they can start offering Claims to their users. It means that the Schema will be now filled with data of actual users to create a Claim, and this claim will be eventually delivered to the user's wallet.

## Create Offer

**Function**: Endpoint to create a new Claim Offer based on an existing Claim Schema.

**How it works**: It requires to pass the Issuer `id`, namely the identifier of the Issuer previously created, and the schema `id`, namely the identifier of the Schema of the Claim intented to offer, as Path Parameters. 

Furthermore, It requires to pass the following as Request Body parameters:

- `attributes` (required) an array of *maximum four objects* that describe the attributes of the Claim Offer. It's important that the number of objects matches the number of attributes defined inside the Schema Creation.
Each object contains: 
    - `attributeKey` (required), name of the attribute as defined in the Schema
    - `attributeValue` (required), value to be assigned to that attribute; its type must match the type defined inside the Schema Creation;

- `expirationDate`, a string that defines the expirationDate of the claim. It is a required value if you specified mandatoryExpiration as true in the Schema Creation.
- `limitedClaims`, a number that can be optionally set to define a limit to the amount of claim, based on this offer, that can be redeemed.

It also requires to pass a valid `Bearer Token` inside the Authorization Request Header.

The Response Body contains a set of information related to your newly created Claim Offer such as its `id`.

**[API Reference](https://api-staging.polygonid.com/#tag/Offers/operation/CreateOffer)**

[![Run in Postman](https://run.pstmn.io/button.svg)](https://www.postman.com/dark-star-200015/workspace/public/request/23322631-2dfc4ac1-4089-4062-8e0c-e862261da70f)

> The usage of this endpoint is included in our [full-flow Tutorial](../flow-tutorial/happy-path.md#7-create-claim-offer)

## Get Offers By Schema 

**Function**: Endpoint to fetch all the Claim Offers created for an existing Schema.

**How it works**: It requires to pass the Issuer `id`, namely the identifier of the Issuer previously created, and the schema `id`, namely the identifier of the existing Schema you are querying, as Path Parameters. 

It also requires to pass a valid `Bearer Token` inside the Authorization Request Header.

The Response Body contains an array of Objects where each object contains the details of a Claim Offer generated by a specific Issuer using the queried Schema.

**[API Reference](https://api-staging.polygonid.com/#tag/Offers/operation/GetOffers)**

[![Run in Postman](https://run.pstmn.io/button.svg)](https://www.postman.com/dark-star-200015/workspace/public/request/23322631-2dfc4ac1-4089-4062-8e0c-e862261da70f)

## Get Offers By Issuer 

**Function**: Endpoint to fetch all the Claim Offers created by an Issuer.

**How it works**: It requires to pass the Issuer `id`, namely the identifier of the Issuer previously created, as Path Parameter. Optionally, it accepts a `query` as Query Parameter which is a search keyword. 

It also requires to pass a valid `Bearer Token` inside the Authorization Request Header.

The Response Body contains an array of Objects where each object contains the details of a Claim Offer generated by the queried Issuer.

> Compared to the `Get Offers By Schema` endpoint, this endpoint doesn't require to specify the `id` of a specific schema therefore the Response can contain offers based on different Schemas. 

**[API Reference](https://api-staging.polygonid.com/#tag/Offers/operation/GetOffersByIssuer)**

[![Run in Postman](https://run.pstmn.io/button.svg)](https://www.postman.com/dark-star-200015/workspace/public/request/23322631-2dfc4ac1-4089-4062-8e0c-e862261da70f)

## Get Offer

**Function**: Endpoint to fetch a specific Claim Offer.

**How it works**: It requires to pass the Issuer `id`, namely the identifier of the Issuer previously created, and the schema `id`, namely the identifier of the Schema used to create the Claim Offer, and the claim offer `id`, namely the identifier of the specific Claim Offer you are querying, as Path Parameters.

It also requires to pass a valid `Bearer Token` inside the Authorization Request Header.

The Response Body contains an Object with the details of that specific Claim Offer.

**[API Reference](https://api-staging.polygonid.com/#tag/Offers/operation/GetOffer)**

[![Run in Postman](https://run.pstmn.io/button.svg)](https://www.postman.com/dark-star-200015/workspace/public/request/23322631-2dfc4ac1-4089-4062-8e0c-e862261da70f)

## Delete Offer

**Function**: Endpoint to delete a specific Claim Offer. 

**How it works**: It requires to pass the Issuer `id`, namely the identifier of the Issuer previously created, and the schema `id`, namely the identifier of the Schema used to create the Claim Offer, and the claim offer `id`, namely the identifier of the specific Claim Offer you want to delete, as Path Parameters.

It also requires to pass a valid `Bearer Token` inside the Authorization Request Header. As a result of this Request, the QR Code associated with that specific Claim Offer gets deactivated. It means that Users are no longer able to use it to fetch Claims inside their wallet.

**[API Reference](https://api-staging.polygonid.com/#tag/Offers/operation/DeleteOffer)**

[![Run in Postman](https://run.pstmn.io/button.svg)](https://www.postman.com/dark-star-200015/workspace/public/request/23322631-2dfc4ac1-4089-4062-8e0c-e862261da70f)

## Create QRCode of Offer

**Function**: Endpoint to generate a QR Code based on a specific Claim Offer for User Authentication.

**How it works**: It requires to pass the claim offer `id`, namely the identifier of the specific Claim Offer you want to generate the QR Code for, as Path Parameter.

The Response Body contains an set of details about the Claim Offer including the `qrCode`. The JSON file included in the `qrCode` can be parsed into a QR Code and presented to the user in order to authenticate. This endpoint will also create a specific `sessionID` for the user that is going to scan that QR Code.

**[API Reference](https://api-staging.polygonid.com/#tag/Offers/operation/CreateOfferQrCode)**

[![Run in Postman](https://run.pstmn.io/button.svg)](https://www.postman.com/dark-star-200015/workspace/public/request/23322631-2dfc4ac1-4089-4062-8e0c-e862261da70f)

> The usage of this endpoint is included in our [full-flow Tutorial](../flow-tutorial/happy-path.md#8-create-qr-code-of-claim-offer)

## Get QRCode of Offer

**Function**: Endpoint to generate a QR Code based on a specific Claim Offer to let User fetch the Claim inside their Wallet.

**How it works**: The Endpoint requires to pass the claim offer `id`, namely the identifier of the specific Claim Offer you want to generate the QR Code for, as Path Parameter and the `sessionID` of the specific user that has been previously authenticated, as Query Parameter.

On successful Request, the Response Body contains an object with a `qrCode` field. The JSON file included in the `qrCode` can be parsed into a QR Code and presented to the user in order to fetch a claim inside their Wallet.

**[API Reference](https://api-staging.polygonid.com/#tag/Offers/operation/GetOfferQrCode)**

[![Run in Postman](https://run.pstmn.io/button.svg)](https://www.postman.com/dark-star-200015/workspace/public/request/23322631-2dfc4ac1-4089-4062-8e0c-e862261da70f)

> The usage of this endpoint is included in our [full-flow Tutorial](../flow-tutorial/happy-path.md#9-get-a-qr-code-of-offer)


