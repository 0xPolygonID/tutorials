
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://polygon.technology/polygon-id/verifier/on-chain-verification/overview/">
      
      
        <link rel="prev" href="../../verification-library/verifier-set-up/">
      
      
        <link rel="next" href="../../query-builder/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.6">
    
    
      
        <title>Implement ERC20 zk airdrop in 20 minutes - Polygon ID Documentation tutorials</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.35e1ed30.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5TKTB44');</script>
<!-- End Google Tag Manager -->
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#on-chain-zk-verification" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
  <p>This Documentation website is <b>outdated</b>. Check the current docs <a href="https://devs.polygonid.com/">here</a>.</p>

          </div>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Polygon ID Documentation tutorials" class="md-header__button md-logo" aria-label="Polygon ID Documentation tutorials" data-md-component="logo">
      
  <img src="../../../logo-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Polygon ID Documentation tutorials
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Implement ERC20 zk airdrop in 20 minutes
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../.." class="md-tabs__link">
          
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../issuer/issuer-overview/" class="md-tabs__link">
          
  
  Issuer

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../verifier-overview/" class="md-tabs__link">
          
  
  Verifier

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../wallet/wallet-overview/" class="md-tabs__link">
          
  
  Wallet

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../contracts/overview/" class="md-tabs__link">
          
  
  Smart Contracts

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../js-sdk/js-sdk-overview/" class="md-tabs__link">
          
  
  JS SDK

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../push-service/guide/" class="md-tabs__link">
          
  
  Push Service

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="https://support.polygon.technology/support/solutions/82000473421" class="md-tabs__link">
          
  
  FAQ

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Polygon ID Documentation tutorials" class="md-nav__button md-logo" aria-label="Polygon ID Documentation tutorials" data-md-component="logo">
      
  <img src="../../../logo-white.svg" alt="logo">

    </a>
    Polygon ID Documentation tutorials
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Home
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../quick-start-demo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start Demo
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Issuer
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Issuer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer/issuer-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Issuer Node Core API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Issuer Node Core API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer/issuer-core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer/setup-issuer-core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup Guide (Core API)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_2_3" id="__nav_2_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_3">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer-node/issuer-node-api/introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_3_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2_3_2" id="__nav_2_2_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer-node/issuer-node-api/identity/apis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Identity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer-node/issuer-node-api/claim/apis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Claim
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer-node/issuer-node-api/agent/apis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Agent
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Issuer Node UI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Issuer Node UI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer/issuer-node-ui/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer/setup-issuer-ui/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup Guide (API UI)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer-node/issuer-node-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Issuer Node UI Guide
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    On-chain Issuer
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            On-chain Issuer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer/on-chain-issuer/on-chain-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer/on-chain-issuer/on-chain-tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Schemas
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Schemas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer/schema-builder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schema Builder UI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer/schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create Custom Schemas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer/schema-exs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schema Examples
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../contracts/credential-linkage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Credential Linkage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer/cred-issue-methods/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Credential Issuance Methods
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer-node/issue-credential-cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Issue Credentials via CLI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../issuer/source-code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Source Code
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Verifier
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Verifier
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../verifier-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../demo-verifier/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start - Demo Verifier
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Features
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Verfier SDK - Off-chain
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Verfier SDK - Off-chain
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../verification-library/verifier-library-intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_2" >
        
          
          <label class="md-nav__link" for="__nav_3_4_2" id="__nav_3_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    APIs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_2">
            <span class="md-nav__icon md-icon"></span>
            APIs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../verification-library/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../verification-library/request-api-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Request APIs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../verification-library/verification-api-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Verification APIs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../verification-library/verifier-set-up/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial - Run a Verifier
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" checked>
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Verifier SDK - On-chain
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Verifier SDK - On-chain
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Implement ERC20 zk airdrop in 20 minutes
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Implement ERC20 zk airdrop in 20 minutes
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#on-chain-verification-flow" class="md-nav__link">
    On-chain verification flow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implement-erc20-zk-airdrop-in-20-minutes" class="md-nav__link">
    Implement ERC20 ZK Airdrop in 20 Minutes
  </a>
  
    <nav class="md-nav" aria-label="Implement ERC20 ZK Airdrop in 20 Minutes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#design-the-erc20-zk-airdrop-verifier-contract" class="md-nav__link">
    Design the ERC20 zk Airdrop Verifier Contract
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-the-contract" class="md-nav__link">
    Deploy the Contract
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-the-zkp-request" class="md-nav__link">
    Set the ZKP Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-the-proof-request-inside-a-qr-code" class="md-nav__link">
    Add the Proof Request Inside a QR Code
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-demo-claim-the-airdrop" class="md-nav__link">
    User Demo: Claim the Airdrop!
  </a>
  
    <nav class="md-nav" aria-label="User Demo: Claim the Airdrop!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-the-proof-submission-is-executed" class="md-nav__link">
    How the proof submission is executed?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extend-it-to-your-own-logic" class="md-nav__link">
    Extend it to Your Own Logic
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-tutorial-for-on-chain-verification" class="md-nav__link">
    Further Tutorial for On-chain Verification
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../query-builder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query Builder
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../verification-library/zk-query-language/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ZK Query Language
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Wallet
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Wallet
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Wallet SDK
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Wallet SDK
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_1" >
        
          
          <label class="md-nav__link" for="__nav_4_2_1" id="__nav_4_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Flutter SDK
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_1">
            <span class="md-nav__icon md-icon"></span>
            Flutter SDK
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/polygonid-sdk-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/flutter-sdk/install-flutter-sdk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Install Flutter SDK
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/flutter-sdk/build-app-with-flutter-sdk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build App with SDK
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/polygonid-sdk-plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flutter Plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/example-app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Example App
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_2" id="__nav_4_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Android SDK
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_2">
            <span class="md-nav__icon md-icon"></span>
            Android SDK
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/android-sdk/install-android-sdk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Implement Android SDK
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/android-sdk/example-app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Example App
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Wallet APIs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Wallet APIs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_1" >
        
          
          <label class="md-nav__link" for="__nav_4_3_1" id="__nav_4_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Identity
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_1">
            <span class="md-nav__icon md-icon"></span>
            Identity
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/identity/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_1_2" >
        
          
          <label class="md-nav__link" for="__nav_4_3_1_2" id="__nav_4_3_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    APIs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_3_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_1_2">
            <span class="md-nav__icon md-icon"></span>
            APIs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/identity/api/create-identity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create Identity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/identity/api/backup-identity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backup Identity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/identity/api/get-did-identifier/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get DID Identifier
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/identity/api/get-identity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Identity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/identity/api/get-identities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Identities
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/identity/api/remove-identity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remove Identity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/identity/api/restore-identity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Restore Identity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/identity/api/get-state/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get State
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/identity/api/sign/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sign Message
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_2" >
        
          
          <label class="md-nav__link" for="__nav_4_3_2" id="__nav_4_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Credential
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_2">
            <span class="md-nav__icon md-icon"></span>
            Credential
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/credential/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_2_2" >
        
          
          <label class="md-nav__link" for="__nav_4_3_2_2" id="__nav_4_3_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    APIs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_3_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_2_2">
            <span class="md-nav__icon md-icon"></span>
            APIs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/credential/api/fetch-and-save-claims/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fetch and Save Claims
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/credential/api/get-claims/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Claims
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/credential/api/update-claims/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update Claims
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/credential/api/remove-claims/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remove Claims
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3_3" id="__nav_4_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Iden3comm
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_3">
            <span class="md-nav__icon md-icon"></span>
            Iden3comm
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/iden3comm/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/iden3comm/auth-requests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Auth Requests
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/iden3comm/jwz/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JWZ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_3_4" >
        
          
          <label class="md-nav__link" for="__nav_4_3_3_4" id="__nav_4_3_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    APIs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_3_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_3_4">
            <span class="md-nav__icon md-icon"></span>
            APIs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/iden3comm/api/authenticate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authenticate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/iden3comm/api/get-proofs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Proof
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/iden3comm/api/get-vocabs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Vocabulary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/iden3comm/api/iden3-message/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Iden3 Message
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_4" >
        
          
          <label class="md-nav__link" for="__nav_4_3_4" id="__nav_4_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Proof
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_4">
            <span class="md-nav__icon md-icon"></span>
            Proof
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/proof/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_3_4_2" id="__nav_4_3_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    APIs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_3_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_4_2">
            <span class="md-nav__icon md-icon"></span>
            APIs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/proof/api/prove/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate Proof
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_5" >
        
          
          <label class="md-nav__link" for="__nav_4_3_5" id="__nav_4_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Profiles
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_5">
            <span class="md-nav__icon md-icon"></span>
            Profiles
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/profiles/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/profiles/api/get-profiles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Profiles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/profiles/api/add-profile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add Profile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-sdk/profiles/api/remove-profile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remove Profile
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Polygon ID App
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Polygon ID App
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/wallet-sdk/polygonid-app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wallet/features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Features
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Smart Contracts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Smart Contracts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../contracts/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    JS SDK
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            JS SDK
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../js-sdk/js-sdk-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Components
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Components
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2_1" >
        
          
          <label class="md-nav__link" for="__nav_6_2_1" id="__nav_6_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Identity
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_1">
            <span class="md-nav__icon md-icon"></span>
            Identity
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../js-sdk/js-sdk-components/identity/identity-wallet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Identity Wallet
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2_2" id="__nav_6_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Credential
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_2">
            <span class="md-nav__icon md-icon"></span>
            Credential
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../js-sdk/js-sdk-components/credential/credential-wallet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Credential Wallet
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2_3" >
        
          
          <label class="md-nav__link" for="__nav_6_2_3" id="__nav_6_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Iden3comm
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_3">
            <span class="md-nav__icon md-icon"></span>
            Iden3comm
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../js-sdk/js-sdk-components/iden3comm/iden3comm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iden3comm
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2_4" >
        
          
          <label class="md-nav__link" for="__nav_6_2_4" id="__nav_6_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Proof
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_4">
            <span class="md-nav__icon md-icon"></span>
            Proof
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../js-sdk/js-sdk-components/proof/proof/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Proof
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../js-sdk/js-sdk-example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Example
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../js-sdk/js-sdk-browser-wallet-demo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Browser Wallet Demo
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Push Service
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Push Service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../push-service/guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guide
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            FAQ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="https://support.polygon.technology/support/solutions/82000473421" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#on-chain-verification-flow" class="md-nav__link">
    On-chain verification flow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implement-erc20-zk-airdrop-in-20-minutes" class="md-nav__link">
    Implement ERC20 ZK Airdrop in 20 Minutes
  </a>
  
    <nav class="md-nav" aria-label="Implement ERC20 ZK Airdrop in 20 Minutes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#design-the-erc20-zk-airdrop-verifier-contract" class="md-nav__link">
    Design the ERC20 zk Airdrop Verifier Contract
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-the-contract" class="md-nav__link">
    Deploy the Contract
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-the-zkp-request" class="md-nav__link">
    Set the ZKP Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-the-proof-request-inside-a-qr-code" class="md-nav__link">
    Add the Proof Request Inside a QR Code
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-demo-claim-the-airdrop" class="md-nav__link">
    User Demo: Claim the Airdrop!
  </a>
  
    <nav class="md-nav" aria-label="User Demo: Claim the Airdrop!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-the-proof-submission-is-executed" class="md-nav__link">
    How the proof submission is executed?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extend-it-to-your-own-logic" class="md-nav__link">
    Extend it to Your Own Logic
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-tutorial-for-on-chain-verification" class="md-nav__link">
    Further Tutorial for On-chain Verification
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5TKTB44"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  
                  


<div><h1 id="on-chain-zk-verification">On-chain ZK Verification</h1>
<p>The on-chain verification workflow allows Dapps to verify users' credentials inside a Smart Contract. Zero-Knowledge Proof cryptography enables this verification to happen in a private manner, namely without revealing any personal information of the user (prover).</p>
<p>This flow is especially needed when further on-chain logic wants to be implemented on successful verification such as:</p>
<ul>
<li>Distribute a token-airdrop only to human-verified accounts</li>
<li>Allow voting only to account members of your DAO </li>
<li>Block airdrops to users that belong to a specific country</li>
<li>Allow trading only to accounts that passed the KYC verification</li>
</ul>
<h2 id="on-chain-verification-flow">On-chain verification flow</h2>
<div align="center">
<img src="../../../imgs/on-chain-verification-flow.png" align="center" width="600">
<div align="center"><span style="font-size: 14px;">
<br>
<b> On-chain verification workflow </b></span></div>
<br>
</div>

<p>At its core, every on-chain interaction between a Verifier and a user's Wallet follows this workflow:</p>
<ul>
<li>After having deployed a <a href="#design-the-erc20-zk-airdrop-verifier-contract">Verifier Smart Contract</a>, the Verifier designs a <a href="#set-the-zkp-request">Request</a> for the users. This has to be recorded on-chain inside the Verifier Smart Contract. </li>
<li>The Request is delivered to the user within a QR code (or via deep-linking; it is up to the implementer).</li>
<li>The user scans the QR code using his/her mobile ID wallet and parses the request</li>
<li>The user fetches the revocation status of the requested credential from the Issuer of that credential.</li>
<li>The user generates a zk proof on mobile according to the request of the website starting from the credentials held in his/her wallet. This also contains the zk proof that the credential is not revoked.</li>
<li>The user sends the zk proof to the Verifier Smart Contract.</li>
<li>The Verifier Smart Contract verifies the zk Proof.</li>
<li>The Verifier Smart Contract checks that the State of the Issuer of the credential and the State of the user are still valid and have not been revoked.</li>
<li>If the verification is successful, the Verifier executes the logic defined in the Smart Contract.</li>
</ul>
<p>Note that an active action from the Verifier is only required at step 1. All the rest of the interaction is between the user and the Smart Contract. All the verification logic is executed programmatically inside the Smart Contract.</p>
<h2 id="implement-erc20-zk-airdrop-in-20-minutes">Implement ERC20 ZK Airdrop in 20 Minutes</h2>
<p>In this tutorial, we will create an ERC20 zk Airdrop Contract. The chosen query criteria is to be born before <code>01/01/2002</code>. Users that are able to prove that were born before that date will be able to get the airdrop. Otherwise, they will not. The proof submitted to the Smart Contract will not reveal any information about the specific date of birth of the user. That is the magic of zero-knowledge! </p>
<blockquote>
<p>To set up a different query check out the <a href="../../verification-library/zk-query-language/">ZK Query Language section</a></p>
</blockquote>
<p>This tutorial is based on the verification of a Credential of Type <code>KYCAgeCredential</code> with an attribute <code>birthday</code> with a Schema URL <code>https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-v3.json-ld</code>.</p>
<p>The prerequisite is that users have the <a href="../../../wallet/wallet-overview/">Polygon ID Wallet app</a> installed and self-issued a Credential of type <code>KYC Age Credential Merklized</code> using our <a href="https://issuer-demo.polygonid.me/">Demo Issuer</a> </p>
<hr>
<p><strong>Note:</strong> The full executable code related to this tutorial can be cloned from this <a href="https://github.com/0xPolygonID/tutorial-examples/tree/main/on-chain-verification" target="_blank">repository</a>.</p>
<hr>
<h3 id="design-the-erc20-zk-airdrop-verifier-contract">Design the ERC20 zk Airdrop Verifier Contract</h3>
<p>Let us jump into the code by writing the <code>ERC20Verifier</code> contract. </p>
<p>The ERC20Verifier is an ERC20 standard contract on steroids. The extra functionality is given by the zero-knowledge proof verification. All the functions dedicated to the zk verification are contained inside the 
<a href="https://github.com/iden3/contracts/blob/master/contracts/verifiers/ZKPVerifier.sol" target="_blank">ZKPVerifier Contract</a> and inherited within the ERC20Verifier. For example, users will submit their proof to claim the airdrop by calling <a href="https://github.com/iden3/contracts/blob/master/contracts/verifiers/ZKPVerifier.sol#L20" target="_blank"><code>submitZKPResponse</code></a>.</p>
<p>The ERC20Verifier contract must define at least a single <code>TRANSFER_REQUEST_ID</code>. This is the Identifier of the request that the contract is posing to the user.</p>
<blockquote>
<p>In this specific case the request is: "to be born before 01/01/2002". Note that this hasn't been added yet to the Smart Contract. It will be added in a few minutes!</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.8.0</span><span class="p">;</span>

<span class="kt">import</span><span class="w"> </span><span class="s2">"@openzeppelin/contracts/token/ERC20/ERC20.sol"</span><span class="p">;</span>
<span class="kt">import</span><span class="w"> </span><span class="s2">"./lib/GenesisUtils.sol"</span><span class="p">;</span>
<span class="kt">import</span><span class="w"> </span><span class="s2">"./interfaces/ICircuitValidator.sol"</span><span class="p">;</span>
<span class="kt">import</span><span class="w"> </span><span class="s2">"./verifiers/ZKPVerifier.sol"</span><span class="p">;</span>

<span class="k">contract</span><span class="w"> </span><span class="ni">ERC20Verifier</span><span class="w"> </span><span class="kt">is</span><span class="w"> </span>ERC20<span class="p">,</span><span class="w"> </span>ZKPVerifier<span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kt">uint64</span><span class="w"> </span><span class="k">public </span><span class="nv">constant</span><span class="w"> </span>TRANSFER_REQUEST_ID<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// define the amount of token to be airdropped per user</span>
<span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="k">public </span><span class="nv">TOKEN_AMOUNT_FOR_AIRDROP_PER_ID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m m-Decimal">10</span><span class="o">**</span><span class="kt">uint</span><span class="p">(</span>decimals<span class="p">());</span>


<span class="w">    </span><span class="kt">constructor</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>name_<span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>symbol_<span class="p">)</span>
<span class="w">        </span>ERC20<span class="p">(</span>name_<span class="p">,</span><span class="w"> </span>symbol_<span class="p">)</span>
<span class="w">    </span><span class="p">{}</span><span class="w">    </span>

<span class="p">}</span>
</code></pre></div>
<p>The ZKPVerifier Contract provides 2 hooks: </p>
<p><a href="https://github.com/0xPolygonID/contracts/blob/main/contracts/verifiers/ZKPVerifier.sol#L114" target="_blank"><code>_beforeProofSubmit</code></a> and <a href="https://github.com/0xPolygonID/contracts/blob/main/contracts/verifiers/ZKPVerifier.sol#L123" target="_blank"><code>afterProofSubmit</code></a>. These hooks are called before and after any proof gets submitted and can be used to create personalized logic inside your Smart Contract.</p>
<p>In this specific case, it must be checked that the sender of the proof matches the address contained in the proof challenge. This requirement is necessary to prevent proof front-running. This condition is added inside <code>_beforeProofSubmit</code>.</p>
<p>The airdrop logic must be added inside <code>_afterProofSubmit</code>. The contract must execute the airdrop once the proof is correctly verified.</p>
<div class="highlight"><pre><span></span><code><span class="k">contract</span><span class="w"> </span><span class="ni">ERC20Verifier</span><span class="w"> </span><span class="kt">is</span><span class="w"> </span>ERC20<span class="p">,</span><span class="w"> </span>ZKPVerifier<span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint64</span><span class="w"> </span><span class="k">public </span><span class="nv">constant</span><span class="w"> </span>TRANSFER_REQUEST_ID<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span>

<span class="hll"><span class="w">    </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">address</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>idToAddress<span class="p">;</span>
</span><span class="hll"><span class="w">    </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">uint256</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>addressToId<span class="p">;</span>
</span>
<span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="k">public </span><span class="nv">TOKEN_AMOUNT_FOR_AIRDROP_PER_ID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m m-Decimal">10</span><span class="o">**</span><span class="kt">uint</span><span class="p">(</span>decimals<span class="p">());</span>

<span class="w">    </span><span class="kt">constructor</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>name_<span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>symbol_<span class="p">)</span>
<span class="w">        </span>ERC20<span class="p">(</span>name_<span class="p">,</span><span class="w"> </span>symbol_<span class="p">)</span>
<span class="w">    </span><span class="p">{}</span>

<span class="hll"><span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">_beforeProofSubmit</span><span class="p">(</span>
</span><span class="hll"><span class="w">        </span><span class="kt">uint64</span><span class="p">,</span><span class="w"> </span><span class="cm">/* requestId */</span>
</span><span class="hll"><span class="w">        </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>inputs<span class="p">,</span>
</span><span class="hll"><span class="w">        </span>ICircuitValidator<span class="w"> </span>validator
</span><span class="hll"><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="p">{</span>
</span><span class="w">        </span><span class="c1">// check that the challenge input of the proof is equal to the msg.sender </span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>GenesisUtils<span class="p">.</span>int256ToAddress<span class="p">(</span>
<span class="w">            </span>inputs<span class="p">[</span>validator<span class="p">.</span>getChallengeInputIndex<span class="p">()]</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>
<span class="w">            </span>_msgSender<span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>addr<span class="p">,</span>
<span class="w">            </span><span class="s2">"address in the proof is not a sender address"</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="hll"><span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">_afterProofSubmit</span><span class="p">(</span>
</span><span class="hll"><span class="w">        </span><span class="kt">uint64</span><span class="w"> </span><span class="nv">requestId</span><span class="p">,</span>
</span><span class="hll"><span class="w">        </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>inputs<span class="p">,</span>
</span><span class="hll"><span class="w">        </span>ICircuitValidator<span class="w"> </span>validator
</span><span class="hll"><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>override<span class="w"> </span><span class="p">{</span>
</span><span class="w">        </span><span class="kt">require</span><span class="p">(</span>
<span class="w">            </span>requestId<span class="w"> </span><span class="o">==</span><span class="w"> </span>TRANSFER_REQUEST_ID<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>addressToId<span class="p">[</span>_msgSender<span class="p">()]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"proof can not be submitted more than once"</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>inputs<span class="p">[</span>validator<span class="p">.</span>getChallengeInputIndex<span class="p">()];</span>
<span class="w">        </span><span class="c1">// execute the airdrop</span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>idToAddress<span class="p">[</span>id<span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span><span class="m m-Decimal">0</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span>super<span class="p">.</span>_mint<span class="p">(</span>_msgSender<span class="p">(),</span><span class="w"> </span>TOKEN_AMOUNT_FOR_AIRDROP_PER_ID<span class="p">);</span>
<span class="w">            </span>addressToId<span class="p">[</span>_msgSender<span class="p">()]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>id<span class="p">;</span>
<span class="w">            </span>idToAddress<span class="p">[</span>id<span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>_msgSender<span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Finally, we can add a further element of security inside the Smart Contract: prevent any type of token transfer (even after the airdrop) unless users passed the proof verification. This last condition is added by overriding the ERC20 <code>_beforeTokenTransfer</code> function and checking that the receiver address <code>to</code> of the transfer is included inside the 
<a href="https://github.com/0xPolygonID/contracts/blob/main/contracts/verifiers/ZKPVerifier.sol#L12" target="_blank"><code>proofs</code></a> mapping. </p>
<div class="highlight"><pre><span></span><code><span class="k">contract</span><span class="w"> </span><span class="ni">ERC20Verifier</span><span class="w"> </span><span class="kt">is</span><span class="w"> </span>ERC20<span class="p">,</span><span class="w"> </span>ZKPVerifier<span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint64</span><span class="w"> </span><span class="k">public </span><span class="nv">constant</span><span class="w"> </span>TRANSFER_REQUEST_ID<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span>

<span class="w">    </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">address</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>idToAddress<span class="p">;</span>
<span class="w">    </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">uint256</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>addressToId<span class="p">;</span>

<span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="k">public </span><span class="nv">TOKEN_AMOUNT_FOR_AIRDROP_PER_ID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m m-Decimal">10</span><span class="o">**</span><span class="kt">uint</span><span class="p">(</span>decimals<span class="p">());</span>

<span class="w">    </span><span class="kt">constructor</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>name_<span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>symbol_<span class="p">)</span>
<span class="w">        </span>ERC20<span class="p">(</span>name_<span class="p">,</span><span class="w"> </span>symbol_<span class="p">)</span>
<span class="w">    </span><span class="p">{}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">_beforeProofSubmit</span><span class="p">(</span>
<span class="w">        </span><span class="kt">uint64</span><span class="p">,</span><span class="w"> </span><span class="cm">/* requestId */</span>
<span class="w">        </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>inputs<span class="p">,</span>
<span class="w">        </span>ICircuitValidator<span class="w"> </span>validator
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="p">...</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">_afterProofSubmit</span><span class="p">(</span>
<span class="w">        </span><span class="kt">uint64</span><span class="w"> </span><span class="nv">requestId</span><span class="p">,</span>
<span class="w">        </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>inputs<span class="p">,</span>
<span class="w">        </span>ICircuitValidator<span class="w"> </span>validator
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>override<span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">    </span><span class="p">}</span>

<span class="hll"><span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">_beforeTokenTransfer</span><span class="p">(</span>
</span><span class="hll"><span class="w">        </span><span class="kt">address</span><span class="p">,</span><span class="w"> </span><span class="cm">/* from */</span>
</span><span class="hll"><span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">to</span><span class="p">,</span>
</span><span class="hll"><span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="cm">/* amount */</span>
</span><span class="hll"><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>view<span class="w"> </span>override<span class="w"> </span><span class="p">{</span>
</span><span class="w">        </span><span class="kt">require</span><span class="p">(</span>
<span class="w">            </span>proofs<span class="p">[</span>to<span class="p">][</span>TRANSFER_REQUEST_ID<span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"only identities who provided proof are allowed to receive tokens"</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The contract is now fully written!</p>
<h3 id="deploy-the-contract">Deploy the Contract</h3>
<p>Execute this Hardhat script to deploy the contract</p>
<div class="highlight"><pre><span></span><code><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">verifierContract</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ERC20Verifier"</span><span class="p">;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">verifierName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ERC20zkAirdrop"</span><span class="p">;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">verifierSymbol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"zkERC20"</span><span class="p">;</span>


<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">spongePoseidonLib</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0x12d8C87A61dAa6DD31d8196187cFa37d1C647153"</span><span class="p">;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">poseidon6Lib</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0xb588b8f07012Dc958aa90EFc7d3CF943057F17d7"</span><span class="p">;</span>


<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">ERC20Verifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">getContractFactory</span><span class="p">(</span><span class="nx">verifierContract</span><span class="p">,{</span>
<span class="w">    </span><span class="nx">libraries</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">SpongePoseidon</span><span class="o">:</span><span class="w"> </span><span class="nx">spongePoseidonLib</span><span class="p">,</span>
<span class="w">      </span><span class="nx">PoseidonUnit6L</span><span class="o">:</span><span class="w"> </span><span class="nx">poseidon6Lib</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">erc20Verifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">ERC20Verifier</span><span class="p">.</span><span class="nx">deploy</span><span class="p">(</span>
<span class="w">    </span><span class="nx">verifierName</span><span class="p">,</span>
<span class="w">    </span><span class="nx">verifierSymbol</span>
<span class="w">  </span><span class="p">);</span>

<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">erc20Verifier</span><span class="p">.</span><span class="nx">deployed</span><span class="p">();</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">verifierName</span><span class="p">,</span><span class="w"> </span><span class="s2">" contract address:"</span><span class="p">,</span><span class="w"> </span><span class="nx">erc20Verifier</span><span class="p">.</span><span class="nx">address</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>The contract ERC20Verifier must be deployed on the Mumbai test network as there is a <a href="">set of supporting contracts</a> that are already deployed on Mumbai! </p>
</blockquote>
<h3 id="set-the-zkp-request">Set the ZKP Request</h3>
<p>As previously mentioned, the actual zkp request "to be born before 01/01/2002" hasn't been added to the Smart Contract yet. To do so it is necessary to call <a href="https://github.com/0xPolygonID/contracts/blob/main/contracts/verifiers/ZKPVerifier.sol#L59" target="_blank"><code>setZKPRequest</code></a> function inherited inside the ERC20Verifier which takes 6 inputs:</p>
<ol>
<li><code>requestId</code>: the ID associated with the request.</li>
<li><code>validator</code>: the address of the <a href="https://github.com/0xPolygonID/contracts/tree/main/contracts/validators" target="_blank">Validators Smart Contract</a> already deployed on Mumbai. This is the contract that executes the verification on the zk proof submitted by the user. It can be of type <a href="../../../contracts/overview/#credentialatomicquerysigvalidator">CredentialAtomicQuerySigValidator</a> or <a href="../../../contracts/overview/#credentialatomicquerymtpvalidator">CredentialAtomicQueryMTPValidator</a>.</li>
<li><code>schema</code> namely the bigInt representation of the schema of the requested credential. This can be obtained by passing your schema to this <a href="https://go.dev/play/p/rnrRbxXTRY6">Go Sandbox</a>. In order to use the sandbox, the constants <code>jsonLDContext</code>, <code>typ</code>, <code>fieldName</code> and <code>schemaJSONLD</code> need to be modified according to your request.</li>
<li><code>claimPathKey</code> represents the path to the queries key inside the merklized credential. In this case it is the path to the <code>birthday</code> key. This can be obtained by passing your schema to this <a href="https://go.dev/play/p/rnrRbxXTRY6">Go Sandbox</a>. In order to use the sandbox, the constants <code>jsonLDContext</code>, <code>typ</code>, <code>fieldName</code> and <code>schemaJSONLD</code> need to be modified according to your request.</li>
<li><code>operator</code> is either 1,2,3,4,5,6. To understand more about the operator you can check the <a href="../../verification-library/zk-query-language/">zk query language</a></li>
<li><code>value</code> represents the threshold value you are querying. In this case it is the date 01/01/2002. </li>
</ol>
<blockquote>
<p>Check out our <a href="../../../contracts/overview/">Smart Contract section</a> to learn more about the set of verifications executed on the zk proof.</p>
</blockquote>
<p>Execute this Hardhat script to set the zk request to the Smart Contract.</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">Operators</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">NOOP</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="c1">// No operation, skip query verification in circuit</span>
<span class="w">  </span><span class="nx">EQ</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="c1">// equal</span>
<span class="w">  </span><span class="nx">LT</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="c1">// less than</span>
<span class="w">  </span><span class="nx">GT</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="c1">// greater than</span>
<span class="w">  </span><span class="nx">IN</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="c1">// in</span>
<span class="w">  </span><span class="nx">NIN</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="c1">// not in</span>
<span class="w">  </span><span class="nx">NE</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mf">6</span><span class="w">   </span><span class="c1">// not equal</span>
<span class="p">}</span>

<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="c1">// you can run https://go.dev/play/p/rnrRbxXTRY6 to get schema hash and claimPathKey using YOUR schema</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">schemaBigInt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"74977327600848231385663280181476307657"</span>

<span class="w">   </span><span class="c1">// merklized path to field in the W3C credential according to JSONLD  schema e.g. birthday in the KYCAgeCredential under the url "https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-v3.json-ld"</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">schemaClaimPathKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"20376033832371109177683048456014525905119173674985843915445634726167450989630"</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">requestId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">schema</span><span class="o">:</span><span class="w"> </span><span class="nx">schemaBigInt</span><span class="p">,</span>
<span class="w">    </span><span class="nx">claimPathKey</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="nx">schemaClaimPathKey</span><span class="p">,</span>
<span class="w">    </span><span class="nx">operator</span><span class="o">:</span><span class="w"> </span><span class="nx">Operators</span><span class="p">.</span><span class="nx">LT</span><span class="p">,</span><span class="w"> </span><span class="c1">// operator</span>
<span class="w">    </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">20020101</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="ow">new</span><span class="w"> </span><span class="nb">Array</span><span class="p">(</span><span class="mf">63</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="mf">0</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">i</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)],</span><span class="w"> </span><span class="c1">// for operators 1-3 only first value matters</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">  </span><span class="c1">// add the address of the contract just deployed</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">ERC20VerifierAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"&lt;ERC20VerifierAddress&gt;"</span>

<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">erc20Verifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">hre</span><span class="p">.</span><span class="nx">ethers</span><span class="p">.</span><span class="nx">getContractAt</span><span class="p">(</span><span class="s2">"ERC20Verifier"</span><span class="p">,</span><span class="w"> </span><span class="nx">ERC20VerifierAddress</span><span class="p">)</span>


<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">validatorAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0xF2D4Eeb4d455fb673104902282Ce68B9ce4Ac450"</span><span class="p">;</span><span class="w"> </span><span class="c1">// sig validator</span>
<span class="w">  </span><span class="c1">// const validatorAddress = "0x3DcAe4c8d94359D31e4C89D7F2b944859408C618"; // mtp validator</span>

<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">erc20Verifier</span><span class="p">.</span><span class="nx">setZKPRequest</span><span class="p">(</span>
<span class="w">        </span><span class="nx">requestId</span><span class="p">,</span>
<span class="w">        </span><span class="nx">validatorAddress</span><span class="p">,</span>
<span class="w">        </span><span class="nx">query</span><span class="p">.</span><span class="nx">schema</span><span class="p">,</span>
<span class="w">        </span><span class="nx">query</span><span class="p">.</span><span class="nx">claimPathKey</span><span class="p">,</span>
<span class="w">        </span><span class="nx">query</span><span class="p">.</span><span class="nx">operator</span><span class="p">,</span>
<span class="w">        </span><span class="nx">query</span><span class="p">.</span><span class="nx">value</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Request set"</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"error: "</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The contract is now correctly deployed on Mumbai Testnet and the query has been set up, congratulations! Now it is time to launch the airdrop! </p>
<h3 id="add-the-proof-request-inside-a-qr-code">Add the Proof Request Inside a QR Code</h3>
<p>The last step is to design the proof request to be embedded inside a QR code that will be shown to the users that want to Credential their airdrops. In this particular case this is how the request should look like (remember to modify it by adding the address of your ERC20Verifier Contract):</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7f38a193-0918-4a48-9fac-36adfdb8b542"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"typ"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/iden3comm-plain-json"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://iden3-communication.io/proofs/1.0/contract-invoke-request"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"thid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7f38a193-0918-4a48-9fac-36adfdb8b542"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"airdrop participation"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"transaction_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"contract_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;ERC20VerifierAddress&gt;"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"method_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b68967e2"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"chain_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">80001</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"network"</span><span class="p">:</span><span class="w"> </span><span class="s2">"polygon-mumbai"</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">"scope"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">                </span><span class="nt">"circuitId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credentialAtomicQuerySigV2OnChain"</span><span class="p">,</span>
<span class="w">                </span><span class="nt">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">"allowedIssuers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="s2">"*"</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://raw.githubusercontent.com/iden3/claim-schema-vocab/main/schemas/json-ld/kyc-v3.json-ld"</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">"credentialSubject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">"birthday"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">"$lt"</span><span class="p">:</span><span class="w"> </span><span class="mi">20020101</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KYCAgeCredential"</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>The scope section inside the JSON file must match the query previously set when calling the "setZKPRequest" function.</p>
</blockquote>
<p>Note that the request resembles in most of its parts with the one designed for <a href="https://0xpolygonid.github.io/tutorials/verifier/verification-library/request-api-guide/" target="_blank">off-chain verification</a>. The extra part that has been added here is the <code>transcation_data</code> that includes:</p>
<ul>
<li><code>contract_address</code>, namely the address of the Verifier contract, in this case, ERC20Verifier</li>
<li><code>method_id</code>, namely the <a href="https://solidity-by-example.org/function-selector/">Function Selector</a> of the <a href="https://github.com/0xPolygonID/contracts/blob/main/contracts/interfaces/IZKPVerifier.sol#L5" target="_blank"><code>submitZKPResponse</code></a> function</li>
<li><code>chain_id</code>, the ID of the chain where the Smart Contract has been deployed</li>
<li><code>network</code>, the name of the network where the Smart contract has been deployed</li>
</ul>
<blockquote>
<p>To display the QR code inside your frontend, you can use the <code>express.static</code> built-in middleware function together with this <a href="https://github.com/0xPolygonID/tutorial-examples/tree/main/verifier-integration/js/static" target="_blank">Static Folder</a> or this <a href="https://codesandbox.io/s/yp1pmpjo4z?file=/index.js">Code Sandbox</a>.</p>
</blockquote>
<p>Scanning the QR with their Polygon ID Wallet, users will be able to generate proofs and send transactions to the Smart Contract in order to Credential their airdrops.</p>
<p>The same proof generation request can also be delivered to users via Deep Linking. In order to do so, it is necessary to <a href="https://www.base64encode.org/">encode</a> the <code>json</code> file to Base64 Format. The related deep link would be <code>iden3comm://?i_m={{base64EncodedJsonHere}}</code>. For example, in this specific case the deep link would be <code>iden3comm://?i_m=ewogICAgImlkIjogIjdmMzhhMTkzLTA5MTgtNGE0OC05ZmFjLTM2YWRmZGI4YjU0MiIsCiAgICAidHlwIjogImFwcGxpY2F0aW9uL2lkZW4zY29tbS1wbGFpbi1qc29uIiwKICAgICJ0eXBlIjogImh0dHBzOi8vaWRlbjMtY29tbXVuaWNhdGlvbi5pby9wcm9vZnMvMS4wL2NvbnRyYWN0LWludm9rZS1yZXF1ZXN0IiwKICAgICJ0aGlkIjogIjdmMzhhMTkzLTA5MTgtNGE0OC05ZmFjLTM2YWRmZGI4YjU0MiIsCiAgICAiYm9keSI6IHsKICAgICAgICAicmVhc29uIjogImFpcmRyb3AgcGFydGljaXBhdGlvbiIsCiAgICAgICAgInRyYW5zYWN0aW9uX2RhdGEiOiB7CiAgICAgICAgICAgICJjb250cmFjdF9hZGRyZXNzIjogIjxFUkMyMFZlcmlmaWVyQWRkcmVzcz4iLAogICAgICAgICAgICAibWV0aG9kX2lkIjogImI2ODk2N2UyIiwKICAgICAgICAgICAgImNoYWluX2lkIjogODAwMDEsCiAgICAgICAgICAgICJuZXR3b3JrIjogInBvbHlnb24tbXVtYmFpIgogICAgICAgIH0sCiAgICAgICAgInNjb3BlIjogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAiaWQiOiAxLAogICAgICAgICAgICAgICAgImNpcmN1aXRJZCI6ICJjcmVkZW50aWFsQXRvbWljUXVlcnlTaWdWMk9uQ2hhaW4iLAogICAgICAgICAgICAgICAgInF1ZXJ5IjogewogICAgICAgICAgICAgICAgICAgICJhbGxvd2VkSXNzdWVycyI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgIioiCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAiY29udGV4dCI6ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vaWRlbjMvY2xhaW0tc2NoZW1hLXZvY2FiL21haW4vc2NoZW1hcy9qc29uLWxkL2t5Yy12My5qc29uLWxkIiwKICAgICAgICAgICAgICAgICAgICAiY3JlZGVudGlhbFN1YmplY3QiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJiaXJ0aGRheSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIkbHQiOiAyMDAyMDEwMQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJLWUNBZ2VDcmVkZW50aWFsIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgXQogICAgfQp9</code></p>
<h2 id="user-demo-claim-the-airdrop">User Demo: Claim the Airdrop!</h2>
<p>This video shows how a user can use their PolygonID wallet app to claim a ERC-20 token airdrop. To join the airdrop users are required to have a Credential of type <code>KYCAgeCredential</code> attesting that they have been born before 01/01/2002.</p>
<div align="center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/NvPfh3nqeEQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>

<div class="video-wrapper">

</div>

<p>Or you can direcly test it scanning the QR Code below using your Polygon ID App: </p>
<div align="center">
<img src="../../../imgs/qr-code-on-chain-verification.png" align="center" width="400" style="border: 4px solid black">
</div>
<p><br></p>
<h3 id="how-the-proof-submission-is-executed">How the proof submission is executed?</h3>
<p>The wallet needs to call the <code>submitZKPResponse()</code> function before it can submit the proof for the requirements set in the Airdrop Participation process. This function forms part of the ZKPVerifier Interface <a href="https://github.com/iden3/contracts/blob/master/contracts/interfaces/IZKPVerifier.sol#L7"><code>IZKPVerifier</code></a> and is actually implemented inside the <a href="https://github.com/iden3/contracts/blob/master/contracts/ZKPVerifier.sol#L21"><code>ZKPVerifier Contract</code></a>.</p>
<div class="highlight"><pre><span></span><code><span class="kt">import</span><span class="w"> </span><span class="s2">"./ICircuitValidator.sol"</span><span class="p">;</span>

interface<span class="w"> </span>IZKPVerifier<span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">submitZKPResponse</span><span class="p">(</span>
<span class="w">        </span><span class="kt">uint64</span><span class="w"> </span><span class="nv">requestId</span><span class="p">,</span>
<span class="w">        </span><span class="kt">uint256</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>inputs<span class="p">,</span>
<span class="w">        </span><span class="kt">uint256</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>a<span class="p">,</span>
<span class="w">        </span><span class="kt">uint256</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">][</span><span class="m m-Decimal">2</span><span class="p">]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>b<span class="p">,</span>
<span class="w">        </span><span class="kt">uint256</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>c
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="extend-it-to-your-own-logic">Extend it to Your Own Logic</h2>
<p>Now that you have been able to create your first on-chain zk-based application you can extend it to accommodate any type of imaginable logic. The target Smart Contract doesn't have to be an ERC20 but it can be an ERC721, a DeFi pool, a voting Smart Contract or whatever contract you can think of. Equally the query can be extended to any type of existing Credential and based on the different operators available inside the <a href="https://0xpolygonid.github.io/tutorials/verifier/verification-library/zk-query-language/" target="_blank">ZK Query Language</a>.</p>
<p>Another possibility to customize your Smart Contract involves setting different zk requests. First of all, multiple <code>REQUEST_ID</code> must be defined inside the main Smart Contract. Therefore, the contract deployer can set a different query for each request ID and create different outcomes inside <code>_afterProofSubmit</code> according to the type of proof received. For example, an airdrop contract can verify the role of a user inside a DAO and distribute a different amount of tokens based on the role.</p>
<h2 id="further-tutorial-for-on-chain-verification">Further Tutorial for On-chain Verification</h2>
<ul>
<li><a href="https://github.com/codingwithmanny/polygonid-on-chain-verification">Polygon ID On-chain Verifications - Codingwithmanny</a>, contains a more detailed explanation of the ERC20 Airdrop using Polygon ID. Furthermore it contains a section for debugging common errors and for minting an NFT starting from on-chain Polygon ID Credential Verification.</li>
</ul></div>


  



<div id="newVersionPopup" class="popup">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup()">&times;</span>
      <h2>New Polygon ID Documentation Website Available!</h2>
      <p>We've released a new version of our documention. Head to <a href="https://devs.polygonid.com/">devs.polygonid.com</a> to check it out.</p>
    </div>
</div>
                

              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "content.tabs.link", "content.code.copy", "header.autohide"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.aecac24b.min.js"></script>
      
        <script src="../../../js/custom.js"></script>
      
    
  </body>
</html>